{% load url from future %}
<style type="text/css">
.slide {width:600px;float:right;margin-bottom:50px;border:10px solid whitesmoke;
min-height: 450px;
-webkit-transition-property : border-color;
  -webkit-transition-duration : 0.25s}
.slide:hover {border-color: lightgray;
  -webkit-transition-property : border-color;
  -webkit-transition-duration : 0.25s}
.none {display: none}
#facet-list li
{
display: inline;
list-style-type: none;
padding-right: 20px;
}
</style>
    <form method="get" action="." style="width:900; margin-right:auto;margin-left:auto">
    <h2>Search</h2>
        <table>
            {{ form.as_table }}
            <tr>
                <td>&nbsp;</td>
                <td>
                    <input type="submit" value="Search">
                </td>
            </tr>
        </table>

        {% if query %}
            <!-- Begin faceting. -->
            <h2>By Tag</h2>

            <div>
                <ul id="facet-list">
                    {% if facets.fields.tags %}
                        {# Provide only the top 5 tags #}
                        {% for tag in facets.fields.tags|slice:":5" %}
                            {% if tag.1 > 0 %}
                            <li><a href="{{ request.get_full_path }}&amp;selected_facets=tags_exact:{{ tag.0|urlencode }}">{{ tag.0 }}</a> ({{ tag.1 }})</li>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <p>No tag facets.</p>
                    {% endif %}
                </ul>
            </div>
            <!-- End faceting -->
            <h3>Results</h3>

            {% for result in page.object_list %}
                <p style="clear:both">

                    {% if result.object.has_pdf %}
                    <a href="{{ result.object.get_absolute_url }}pdf">{{ result.object.title }}</a>
                        <iframe src="{{ result.object.get_absolute_url }}pdf" class="none"></iframe>
                    {% else %}
                    <a href="{{ result.object.get_absolute_url }}">{{ result.object.title }}</a>
                    {% endif %}
                    {% if result.object.has_pngs %}
                        <a href="{% url 'serve_document' result.object.id 'pdf' %}">
                            <img class="slide" src="{% url 'serve_document_thumbnail' result.object.id 600 %}" />
                        </a>
                    {% endif %}
                </p>
            {% empty %}
                <p>No results found.</p>
            {% endfor %}

            {% if page.has_previous or page.has_next %}
                <div style="clear:both">
                    {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
                    |
                    {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
                </div>
            {% endif %}
        {% else %}
            <a href="{% url 'upload.views.new_upload' %}">Upload some shiz</a>
            {# Show some example queries to run, maybe query syntax, something else? #}
        {% endif %}
    </form>
